<script data-no-instant>InstantClick.init();</script>

{{ if .Site.Params.enableDarkMode }}
    <script data-no-instant>
        InstantClick.on('change', function () {
            const theme = localStorage.getItem('theme');
            if (theme === "dark") {
                goDarkMeta();
                goDark();
            } else if (theme === "light") {
                goLightMeta();
                goLight();
            }
        });
    </script>
{{ end -}}

{{ if and .Site.Params.enableGoogleAnalytics (eq hugo.Environment "production") -}}
    {{ if eq .Site.Params.trackingCodeType "gtag" -}}
        <script data-no-instant>
            InstantClick.on('change', function () {
                gtag('config', '{{ .Site.Params.trackingID }}', {
                    'page_path': location.pathname + location.search
                });
            });
        </script>
    {{ end -}}

    {{ if eq .Site.Params.trackingCodeType "analytics" -}}
        <script data-no-instant>
            InstantClick.on('change', function () {
                ga('send', 'pageview', location.pathname + location.search);
            });
        </script>
    {{ end -}}
{{ end -}}