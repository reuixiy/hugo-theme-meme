{{ if .Site.Params.enableDarkMode }}
    {{ with .Site.Params.defaultTheme | default "light" }}
        {{- $hide := false -}}
        {{- if or (and $.IsHome $.Site.Params.hideThemeToggleInHome) (and (not $.IsHome) $.Site.Params.hideThemeToggle) -}}
            {{- $hide = true -}}
        {{- end -}}
        <input
            type="checkbox"
            id="theme-switcher"
            {{ if eq . "dark" }}checked{{ end }}
            {{ if $hide }}aria-hidden="true"{{ end }}
        />
        <label
            for="theme-switcher"
            class="switcher-label"
            {{ if $hide }} data-hide="true"{{ end }}
        >
            {{- $icon := "sun" -}}
            {{- if eq . "dark" -}}
                {{- $icon = "moon" -}}
            {{- end -}}
            {{- partial "utils/icon.html" (dict "Deliver" $ "name" $icon) -}}
        </label>
    {{ end }}
{{ end }}
